<div class="page-content">

<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>

<p>
  <h1>Enrollment for <%= @course.name + " " + @course.number.to_s + " - " + @course.section.to_s %></h1>
  <%= link_to 'Edit Course', edit_course_path(@course) %><br>
  <%= link_to 'Add Student', new_course_student_path(@course) %><br>
  <%= link_to 'Back to Courses', courses_path %>
</p>

<p id="course-id" hidden><%= params[:id] %><p>

<form id="upload-roster-form" method="post" enctype="multipart/form-data" action="/courses">
  <label for="enrollment">Choose roster (.csv) to upload</label>
  <div style="display: flex; flex-direction: row; justify-content: center; align-items: center;">
    <input style="margin-left: 5px; margin-right: 5px; background-color: lightgray;"
          type="file" id="enrollment" name="enrollment"
          accept=".csv">
    <button>Submit</button>
  </div>
  <div>
    
  </div>
</form>
<br>

<script>
  var courseID = document.getElementById("course-id").innerHTML;
  $('form#upload-roster-form').attr('action', "/courses/".concat(courseID, "/import"));
</script>


<table>
  <tr>
    <th>First Name</th>
    <th>Last Name</th>
    <th>Email</th>
    <th style="color: white; border-bottom-color: black;">View</th>
    <th style="color: white; border-bottom-color: black;">Edit</th>
    <th style="color: white; border-bottom-color: black;">&#215</th>
    <th>Enrolled Courses</th>
    <th></th>
  </tr>
  <% @students.each do |student| %>
    <tr>
      <td><%= student.fname %></td>
      <td><%= student.lname %></td>
      <td><%= student.email %></td>
      <td><%= link_to 'View', student_path(student) %></td>
      <td><%= link_to ('<i class="fa fa-edit"></i>').html_safe, edit_student_path(student) %></td>
      <td><%= link_to ('<i class="fa fa-user-times"></i>').html_safe, course_student_path(@course, student),
              method: :delete,
              data: { confirm: 'Are you sure you want to remove this student?' } %></td>
      <td>
        <% student.courses.each do |c| %>
          <%= c.name %><%= c.number %> 
        <% end %></td>
    </tr>
    
  <% end %>
</table>

</div>