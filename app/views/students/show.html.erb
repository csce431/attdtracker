<!-- Show student profiles
-->
<div class="page-content">

<h2>Welcome,
    <% if @student.prefname.empty? %>
        <%= @student.fname + "!" %>
    <% else %>
        <%= @student.prefname + "!" %>
    <% end %>
</h2>
<table>
    <tr>
        <td class="colC">Full Name:</td>
        <td class="colD">
            <%= @student.fname + " " %>
            <% if !@student.mname.empty? %>
                <%= @student.mname %>
            <% end %>
            <%= @student.lname %>
        </td>
    </tr>
    <tr>
        <td class="colC">Preferred Name:</td>
        <td class="colD">
            <% if @student.prefname.empty? %>
                <%= "-" %>
            <% else %>
                <%= @student.prefname %>
            <% end %>
        </td>
    </tr>
    <tr>
        <td class="colC">Email:</td>
        <td class="colD"><%= @student.email %></td>
    </tr>
    <!--tr>
        <td class="colC">Card Number: </td>
        <td class="colD"><%= @card %></td>
        <td class="colD"><%= @student.card_num %></td>
    </tr-->
    <tr>
        <td class="colC">Classes:</td>
        <td class="colD"><strong>
            <% @courses.each do |course| %>
                <%= course.name %><%= ' ' %><%= course.number %> 
            <% end %>
        </strong></td>
    </tr>
</table><br>

<%= link_to 'Edit Student Profile', edit_student_path() %><br>
<%= link_to 'Back', courses_path %>

<br><br><br>
<div>
    <table id="pres_abs">
        <% @courses.each do |course| %>
            <% $i = 0 %>
            <% $j = 0 %>
            <tr><th class="dept"><%= course.name %><%= ' ' %><%= course.number %></th></tr>
            <!-- table: present column-->
            <% course.days.each do |day| %> 
                <% if day.cards.include? Card.where(email: @student.email).first %>
                    <% $i += 1 %>
                <% else %>
                    <% $j += 1 %>
                <% end %>
            <% end %>   
            <tr>
                <td class="pres"><%= "Present: "%><%= $i %><%= '/' %><%= course.days.length %></td>
                    <% course.days.each do |day| %> 
                        <% if day.cards.include? Card.where(email: @student.email).first %>
                            <tr><td><%= day.classday %></td></tr>
                        <% end %>
                    <% end %>
                <td class="abs"><%= "Absent: "%><%= $j %><%= '/' %><%= course.days.length %></td>
                    <% course.days.each do |day| %> 
                        <% if !day.cards.include? Card.where(email: @student.email).first %>
                            <tr><td><%= day.classday %></td></tr>
                        <% end %>
                    <% end %>
            </tr>
            <!-- Display dates -->
        <!--    <tr>
            <% course.days.each do |day| %> 
                <% if day.cards.include? Card.where(email: @student.email).first %>
                    <td><%= day.classday %></td>
                <% else %>
                    <td><%= day.classday %></td>
                <% end %>
            <% end %>
            </tr> -->
        </td>    
        <% end %>
    </table>
</div>

</div>